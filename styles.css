:root{
  --bg:#0a0f18; --panel:rgba(255,255,255,.06); --ring:rgba(255,255,255,.09);
  --text:#eaf2ff; --muted:#9fb2cd; --good:#75f0b0; --bad:#ff7d7d; --pill:#131b28;
  --pad0:#61b0ff; --pad1:#a06bff; --pad2:#ffb457; --pad3:#63e6be;
  --pad0-glow:#61b0ff; --pad1-glow:#a06bff; --pad2-glow:#ffb457; --pad3-glow:#63e6be;
  --focus:#8ad0ff;
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f7f9fe; --panel:rgba(0,0,0,.05); --ring:rgba(0,0,0,.08); --text:#111a2b; --muted:#5a6e89; --pill:#e8eef8; }
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:radial-gradient(1200px 1000px at 50% -10%, rgba(84,147,255,.25), transparent) , var(--bg);
  color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}

.safe{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}
.topbar{
  display:flex;justify-content:space-between;align-items:center;padding:10px 16px;gap:8px;
  border-bottom:1px solid var(--ring); backdrop-filter:saturate(140%) blur(8px); position:sticky; top:0; z-index:10;
  background:linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,0)) }
.brand{display:flex;gap:10px;align-items:center}
.brand img{width:28px;height:28px;opacity:.9}
.actions{display:flex;gap:6px}
.icon{border:1px solid var(--ring);background:var(--panel);border-radius:10px;padding:6px 10px;color:inherit;cursor:pointer}

.board{
  position:relative;margin:16px auto;width:min(92vw,620px);aspect-ratio:1;border-radius:28px;padding:16px;
  background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));
  box-shadow:inset 0 0 0 1px var(--ring), 0 30px 80px rgba(0,0,0,.35);
  overflow:hidden;
}
#fx{position:absolute;inset:0;width:100%;height:100%;pointer-events:none;filter:blur(.2px)}

.pad{
  position:absolute;width:48%;height:48%;border-radius:22px;border:1px solid var(--ring);background:var(--panel);
  outline:none;cursor:pointer;touch-action:manipulation;
  transform:translateZ(0) scale(1); transition:transform .08s ease, box-shadow .12s ease, background .12s ease;
}
.pad:focus-visible{box-shadow:0 0 0 3px var(--focus)}
#pad-0{top:0;left:0; --c:var(--pad0); --g:var(--pad0-glow)}
#pad-1{top:0;right:0; --c:var(--pad1); --g:var(--pad1-glow)}
#pad-2{bottom:0;left:0; --c:var(--pad2); --g:var(--pad2-glow)}
#pad-3{bottom:0;right:0; --c:var(--pad3); --g:var(--pad3-glow)}
.pad.glow{background:linear-gradient(180deg, color-mix(in lab, var(--c) 35%, transparent), transparent);
  box-shadow:0 0 22px 4px color-mix(in lab, var(--g) 65%, transparent), inset 0 0 0 1px var(--ring); transform:scale(1.02)}

.hud{position:absolute;inset:50% auto auto 50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:10px;pointer-events:none}
.status-pill{
  padding:6px 12px;border-radius:999px;background:var(--pill);border:1px solid var(--ring);opacity:.92;
  font-size:14px;color:var(--muted);min-width:120px;text-align:center
}
.score{display:flex;gap:16px;color:var(--muted);font-size:14px;justify-content:center}
.overlay{
  position:absolute;inset:0;display:grid;place-items:center;background:radial-gradient(800px 600px at 50% 0%, rgba(0,0,0,.35), rgba(0,0,0,.0));
}
.overlay .card{
  width:min(92vw,420px);padding:22px;border-radius:24px;border:1px solid var(--ring); background:var(--panel);
  backdrop-filter:saturate(140%) blur(10px); text-align:center; box-shadow: 0 30px 80px rgba(0,0,0,.5);
}
.primary{padding:12px 22px;border-radius:14px;border:1px solid var(--ring);background:linear-gradient(180deg,#1a2435,#141c2a);color:var(--text);cursor:pointer}
.primary:active{transform:translateY(1px)}
.mode-row{display:flex;gap:8px;justify-content:center;margin:8px 0 16px}
.chip{padding:8px 12px;border-radius:999px;border:1px solid var(--ring);background:var(--panel);cursor:pointer}
.chip.selected{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02))}
.hint{color:var(--muted);font-size:13px;margin-top:12px}
.countdown{
  position:absolute;inset:0;display:grid;place-items:center; font-weight:800; font-size:64px; letter-spacing:1px;
  opacity:0; transform:scale(0.9); pointer-events:none; color:var(--text)
}
.countdown.show{opacity:1;transform:scale(1);transition:opacity .24s ease, transform .24s ease}

.toolbar{display:flex;gap:8px;justify-content:center;margin:10px auto}
.captions{margin:6px auto 16px;text-align:center;color:var(--muted);min-height:1.2em}
.foot{display:flex;justify-content:center;padding:12px;color:var(--muted)}

.sheet{min-width:min(92vw,520px);border:none;padding:0}
dialog::backdrop{background:rgba(0,0,0,.4);backdrop-filter:blur(3px)}
.sheet{border-radius:16px;background:var(--panel);border:1px solid var(--ring);padding:14px 16px}
.sheet .row{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
.sheet menu{display:flex;justify-content:flex-end;margin-top:12px}
.row input[type="range"]{width:60%}
.row input[type="checkbox"]{transform:scale(1.1)}

.shield{position:absolute;inset:0;pointer-events:none} /* turned on/off via .lock class */
.shield.lock{pointer-events:auto}

@media (prefers-reduced-motion: reduce){
  .pad,.primary,.countdown{transition:none}
}

/* High-contrast helper (toggled via JS) */
:root.high-contrast{
  --panel:rgba(255,255,255,.12);
  --ring:rgba(255,255,255,.24);
  --focus:#fff36a;
}

/* Extra theme hook */
:root.theme-neon{
  --pad0:#7cc5ff; --pad1:#c08bff; --pad2:#ffc180; --pad3:#80f5cf;
  --pad0-glow:#89d1ff; --pad1-glow:#d0a6ff; --pad2-glow:#ffd49f; --pad3-glow:#9afcdc;
}
